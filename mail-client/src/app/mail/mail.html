<div class="mail">   
    <div class="navbar">
        <div class="title">MansyMail</div>

        <div class="searchbar">
            <div class="search">
                <input type="text">
            </div>
            <div class="filter">filter</div>
        </div>

        <div class="dropdown-btn" id="dropdownBtn" (click)="toggleProfileDropdown()"></div>

    </div>

    <div class="dropdown">
        <div [style.display] = "isProfileDropdownOpen? 'none': 'block'">
                    
            <div class="dropdown-menu" id="dropdownMenu" >
                <div class="user-email">{{currentUser()?.email}}</div>
                <div class="profile-image"></div>
                <div class="user-name">Hello, {{currentUser()?.name}}</div>
                <div class="buttons">
                    <button class="add-account" (click)="addAccount()">Add Account</button>
                    <button class="sign-out" (click)="signOut()">Sign Out</button>
                </div>
            </div>
        </div>
    </div>

    <div class="sidebar">
        <button class="composeBtn">Compose</button>
        <ul class="features">
            <li (click)="loadInbox()" [class.active]="currentFolder() === 'inbox'">Inbox</li>
            <li (click)="loadFolder('starred')" [class.active]="currentFolder() === 'starred'">Starred</li>
            <li (click)="loadSent()" [class.active]="currentFolder() === 'sent'">Sent</li>
            <li (click)="loadDrafts()" [class.active]="currentFolder() === 'drafts'">Drafts</li>
            <li (click)="loadFolder('search')" [class.active]="currentFolder() === 'search'">Advanced Search</li>
            <li (click)="loadFolder('important')" [class.active]="currentFolder() === 'important'">Important</li>
            <li (click)="loadFolder('scheduled')" [class.active]="currentFolder() === 'scheduled'">Scheduled</li>
            <li (click)="loadFolder('all')" [class.active]="currentFolder() === 'all'">All Mail</li>
            <li (click)="loadFolder('spam')" [class.active]="currentFolder() === 'spam'">Spam</li>
            <li (click)="loadFolder('trash')" [class.active]="currentFolder() === 'trash'">Trash</li>
        </ul>
    </div>

    <div class="sent-mails">
        
        <div class="filterbar"></div>
        <div class="selectbar">
            <div class="left-selector">
                <div class="selector">
                    <button class="selctorBtn"></button>
                    <div class="selectorDropDown"></div>
                </div>

                <div class="refresh" (click)="refresh()" style="cursor: pointer;"></div>

                <div class="moreDropdown"></div>
            </div>

            <div class="right-selector">
                <div class="page-display"></div>
                <button class="page-left"></button>
                <button class="page-right"></button>
            </div>
            
        </div>

        <div class="mail-list">
            <!-- Loading state -->
            <div *ngIf="isLoading()" style="padding: 20px; text-align: center;">
                Loading emails...
            </div>

            <!-- Error state -->
            <div *ngIf="errorMessage()" style="padding: 20px; text-align: center; color: red;">
                {{ errorMessage() }}
            </div>

            <!-- Empty state -->
            <div *ngIf="!isLoading() && !errorMessage() && mails().length === 0" style="padding: 20px; text-align: center; color: #999;">
                No emails found in {{ currentFolder() }}
            </div>

            <!-- Email list -->
            <div *ngFor="let mail of mails()" class="mail-item" [class.unread]="!mail.isRead">
                <div class="mail-sender">{{ mail.sender }}</div>
                <div class="mail-subject">{{ mail.subject }}</div>
                <div class="mail-body-preview">{{ mail.body.substring(0, 100) }}...</div>
                <div class="mail-timestamp">{{ mail.timestamp | date:'short' }}</div>
            </div>
        </div>
    </div>

</div> 